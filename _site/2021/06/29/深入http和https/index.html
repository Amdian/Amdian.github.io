<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>深入http和https</title>
	<meta name="description" content="">
	
	<link rel="canonical" href="http://localhost:4000/2021/06/29/%E6%B7%B1%E5%85%A5http%E5%92%8Chttps/">
	<link rel="alternate" type="application/rss+xml" title="Mr_Liu Blog" href="http://localhost:4000/feed.xml" />
	
	<!-- <link rel="stylesheet" href="/css/main.css"> -->
    
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/static/css/index.css">
	<script type="text/javascript" src="/static/js/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/css/monokai_sublime.min.css">
	<script type="text/javascript" src="/static/js/highlight.min.js"></script>

    <!--
    <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css">
	<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/highlight.js/8.4/styles/monokai_sublime.min.css">
	<script type="text/javascript" src="http://apps.bdimg.com/libs/highlight.js/8.4/highlight.min.js"></script>
    -->
    
	<script type="text/javascript" src="/static/js/index.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</head>

 <!--  <body data-spy="scroll" data-target="#myAffix"> -->
  <body>

    <!--包含头部html-->
    <header>

<!-- navbar -->
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Mr_Liu Blog</a>
      <p class="navbar-text"></p>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">

        
          <li>
        
        <a href="/">主页</a>
        </li>
        

        <!--循环输入头标题-->
        
          
            
              <li>
            
                <a href="/archives/"><span class="glyphicon "></span> 归档</a></li>
          
        
          
            
              <li>
            
                <a href="/about/"><span class="glyphicon "></span> 关于</a></li>
          
        
          
        
          
        
          
            
              <li>
            
                <a href="/"><span class="glyphicon "></span> Mr_Liu Blog</a></li>
          
        
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

</header>

    <div id="main" class="container main">
      <div class="row">
  <div id="myArticle" class="col-sm-9">
    <div class="post-area post">
      <header>
        <h1>深入http和https</h1>
        <p>Jun 29, 2021</p>
      </header>
      <hr>
      <article>
        <ul id="markdown-toc">
  <li><a href="#http" id="markdown-toc-http">HTTP</a>    <ul>
      <li><a href="#http概念" id="markdown-toc-http概念">Http概念</a></li>
      <li><a href="#协议层" id="markdown-toc-协议层">协议层</a></li>
      <li><a href="#请求响应模型" id="markdown-toc-请求响应模型">请求响应模型</a></li>
      <li><a href="#http过程" id="markdown-toc-http过程">HTTP过程</a></li>
      <li><a href="#http缺点" id="markdown-toc-http缺点">HTTP缺点</a></li>
    </ul>
  </li>
  <li><a href="#https" id="markdown-toc-https">HTTPS</a>    <ul>
      <li><a href="#https概念" id="markdown-toc-https概念">HTTPS概念</a></li>
      <li><a href="#https和http的区别" id="markdown-toc-https和http的区别">HTTPS和HTTP的区别</a></li>
      <li><a href="#tlsssl工作原理" id="markdown-toc-tlsssl工作原理">TLS/SSL工作原理</a></li>
    </ul>
  </li>
</ul>

<h3 id="http">HTTP</h3>

<h4 id="http概念">Http概念</h4>

<blockquote>
  <p>引自维基百科HTTP:超文本传输协议（英文：HyperText Transfer Protocol，缩写：HTTP）是一种用于分布式、协作式和超媒体信息系统的应用层协议。HTTP是万维网的数据
通信的基础。设计HTTP最初的目的是为了提供一种发布和接收HTML页面的方法。通过HTTP或者HTTPS协议请求的资源由统一资源标识符（Uniform Resource Identifiers，.URI）来标识。</p>
</blockquote>

<hr />

<h4 id="协议层">协议层</h4>

<p>HTTP（HyperText Transfer Protocol），超文本传输协议，是一个基于TCP实现的应用层协议。</p>

<p><img src="/static/img/internet/16.jpg" alt="16" width="80%" /></p>

<hr />

<h4 id="请求响应模型">请求响应模型</h4>

<p>HTTP由请求和响应构成，是一个标准的客户端服务器模型（B/S）。HTTP协议永远都是客户端发起请求，服务器回送响应。见下图:</p>

<p><img src="/static/img/internet/17.jpg" alt="17" width="80%" /></p>

<p>HTTP是一个无状态的协议。无状态是指客户机（Web浏览器）和服务器之间不需要建立持久的连接，这意味着当一个客户端向服务器端发出请求，然后服务器返回响应(response)，连接就被关闭了，在服务器端不保留连接的有关信息.HTTP遵循请求(Request)/应答(Response)模型。客户机（浏览器）向服务器发送请求，服务器处理请求并返回适当的应答。所有HTTP连接都被构造成一套请求和应答。</p>

<hr />

<h4 id="http过程">HTTP过程</h4>

<p>一次HTTP操作称为一个事务，其工作整个过程如下：</p>

<p><strong>1. 地址解析</strong></p>

<p>如用客户端浏览器请求这个页面：localhost.com:8080/index.htm
从中分解出协议名、主机名、端口、对象路径等部分，对于我们的这个地址，解析得到的结果如下：</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">协议名</span><span class="err">：</span><span class="n">http</span>
<span class="n">主机名</span><span class="err">：</span><span class="n">localhost</span><span class="o">.</span><span class="na">com</span>
<span class="n">端口</span><span class="err">：</span><span class="mi">8080</span>
<span class="n">对象路径</span><span class="err">：</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="na">htm</span>
</code></pre></div></div>
<p>复制代码在这一步，需要域名系统DNS解析域名localhost.com,得主机的IP地址。</p>

<p><strong>2. 封装HTTP请求数据包</strong></p>

<p>把以上部分结合本机自己的信息，封装成一个HTTP请求数据包</p>

<p><strong>3. 封装成TCP包，建立TCP连接（TCP的三次握手）</strong></p>

<p>在HTTP工作开始之前，客户机（Web浏览器）首先要通过网络与服务器建立连接，该连接是通过TCP来完成的，该协议与IP协议共同构建Internet，即著名的TCP/IP协议族，因此Internet又被称作是TCP/IP网络。HTTP是比TCP更高层次的应用层协议，根据规则，只有低层协议建立之后才能，才能进行更层协议的连接，因此，首先要建立TCP连接，一般TCP连接的端口号是80。这里是8080端口。</p>

<p><strong>4. 客户机发送请求命令</strong></p>

<p>建立连接后，客户机发送一个请求给服务器，请求方式的格式为：统一资源标识符（URL）、协议版本号，后边是MIME信息包括请求修饰符、客户机信息和可内容。</p>

<p><strong>5. 服务器响应</strong></p>

<p>服务器接到请求后，给予相应的响应信息，其格式为一个状态行，包括信息的协议版本号、一个成功或错误的代码，后边是MIME信息包括服务器信息、实体信息和可能的内容。
实体消息是服务器向浏览器发送头信息后，它会发送一个空白行来表示头信息的发送到此为结束，接着，它就以Content-Type应答头信息所描述的格式发送用户所请求的实际数据</p>

<p><strong>6. 服务器关闭TCP连接</strong></p>

<p>一般情况下，一旦Web服务器向浏览器发送了请求数据，它就要关闭TCP连接，然后如果浏览器或者服务器在其头信息加入了这行代码</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">Connection:</span><span class="n">keep</span><span class="o">-</span><span class="n">alive</span>
</code></pre></div></div>
<p>复制代码TCP连接在发送后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络带宽。</p>

<hr />

<h4 id="http缺点">HTTP缺点</h4>

<p>• 通信使用明文，可能被窃听</p>

<p>• 不验证通信方的身份，可能遭遇伪装</p>

<p>• 无法证明报文的完整性，有可能遭遇篡改</p>

<hr />

<h3 id="https">HTTPS</h3>

<h4 id="https概念">HTTPS概念</h4>

<blockquote>
  <p>引自维基百科HTTPS：超文本传输安全协议（英语：Hypertext Transfer Protocol Secure，缩写：HTTPS，常称为HTTP over TLS，HTTP over SSL或HTTP Secure）是一种通过计算机网络进行安全通信的传输协议。HTTPS经由HTTP进行通信，但利用SSL/TLS来加密数据包。HTTPS开发的主要目的，是提供对网站服务器的身份认证，保护交换数据的隐私与完整性。这个协议由网景公司（Netscape）在1994年首次提出，随后扩展到互联网上。历史上，HTTPS连接经常用于万维网上的交易支付和企业信息系统中敏感信息的传输。在2000年代晚期和2010年代早期，HTTPS开始广泛使用于保护所有类型网站上的网页真实性，保护账户和保持用户通信，身份和网络浏览的私密性。</p>
</blockquote>

<p>HTTP协议采用明文传输信息，存在信息窃听、信息篡改和信息劫持的风险，而协议TLS/SSL具有身份验证、信息加密和完整性校验的功能，可以避免此类问题发生。</p>

<p>TLS/SSL全称安全传输层协议Transport Layer Security, 是介于TCP和HTTP之间的一层安全协议，不影响原有的TCP协议和HTTP协议，所以使用HTTPS基本上不需要对HTTP页面进行太多的改造。</p>

<p><img src="/static/img/internet/18.jpg" alt="18" width="80%" /></p>

<p>HTTPS是在HTTP上建立SSL加密层，并对传输数据进行加密，是HTTP协议的安全版。HTTPS主要作用是：</p>

<p>• 对数据进行加密，并建立一个信息安全通道，来保证传输过程中的数据安全</p>

<p>• 对网站服务器进行真实身份认证</p>

<hr />

<h4 id="https和http的区别">HTTPS和HTTP的区别</h4>

<p><img src="/static/img/internet/19.jpg" alt="19" width="80%" /></p>

<p>可以看到HTTPS比HTTP多了一层TLS/SSL协议，这个协议是干嘛的，有什么作用呢？ 下面讲解TLS/SSL工作原理。</p>

<hr />

<h4 id="tlsssl工作原理">TLS/SSL工作原理</h4>

<p>HTTPS协议的主要功能基本都依赖于TLS/SSL协议，TLS/SSL的功能实现主要依赖于三类基本算法：散列函数 Hash、对称加密和非对称加密，其利用非对称加密实现身份认证和密钥协商，对称加密算法采用协商的密钥对数据加密，基于散列函数验证信息的完整性。</p>

<p><img src="/static/img/internet/20.jpg" alt="20" width="80%" /></p>

<p><img src="/static/img/internet/21.jpg" alt="21" width="80%" /></p>


       
      </article>
      <hr>
        <div class="bdsharebuttonbox">
            <a href="#" class="bds_more" data-cmd="more"></a>
            <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
            <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
            <a href="#" class="bds_fbook" data-cmd="fbook" title="Share to Facebook"></a>
            <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
            
        </div>
        <script>
            window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    </div>
	
    <!-- duoshuo.com javascript include code. -->    
    
    <!-- disqus.com javascript include code. -->
	
    <div class="post-area post comment">
        <div id="disqus_thread"></div>
    </div>
	<script>
		var disqus_config = function () {
			this.page.url = "http://Amdian.github.io/2021/06/29/%E6%B7%B1%E5%85%A5http%E5%92%8Chttps/"; 
			this.page.identifier = "/2021/06/29/深入http和https"; 
		};
		(function() {
			var d = document, s = d.createElement('script');
			s.src = '//Amdian.disqus.com/embed.js';
			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
		})();
	</script>
	
    
  </div>
  
  <div id="content" class="col-sm-3">
    <!-- <div id="myAffix" class="shadow-bottom-center hidden-xs" data-spy="affix" data-offset-top="0" data-offset-bottom="-20"> -->
    <div id="myAffix" class="shadow-bottom-center hidden-xs" >
      <div class="categories-list-header">
        导航
      </div>
      <div class="content-text"></div>
    </div>
  </div>

</div>
    </div>
 
    <!-- 看板娘 -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js"></script>
    <script type="text/javascript">
    $(window).load(function() {
    L2Dwidget.init({
    "model": {
    jsonPath: "https://cdn.jsdelivr.net/npm/live2d-widget-model-shizuku@1.0.5/assets/shizuku.model.json",
    "scale": 1
    },
    "display": {
    "width": 150,
    "height": 300,
    "position": "left",
    "hOffset": 20,
    "vOffset": -20
    },
    "mobile": {
    "show": true,
    "scale": 0.8
    },
    "react": {
    "opacityDefault": 0.8,
    "opacityOnHover": 0.2
    }
    });
    });
    </script> -->
    <!-- 上面都是看板娘 -->
    
    <div class="waifu">
    <div class="waifu-tips"></div>
    <canvas id="live2d" width="280" height="250" class="live2d"></canvas>
    <div class="waifu-tool">
    <span class="fui-chat"></span>
    <span class="fui-photo"></span>
    </div>
    </div>
    
    <div id="top" data-toggle="tooltip" data-placement="left" title="back to top">
      <a href="javascript:;">
        <div class="arrow"></div>
        <div class="stick"></div>
      </a>
    </div>




    <footer class="">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <a href="mailto:473919195@qq.com"><span class="glyphicon glyphicon-envelope"></span> 473919195@qq.com</a>
        <span class="point"> · </span>
        
          <a href="https://github.com/Amdian">
            <span class="icon">
              <svg viewBox="0 0 16 16">
                <path fill="#aaa" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            Github
            <!-- <span>Amdian</span> -->
          </a>
          
          <span class="point"> · </span>
          <span><a href="_posts/internet/2021-6-29-深入http和https.md">View source</a></span>
          <span class="point"> · </span>
          <span><a class="newpost" href="#">粤ICP备2021097855号</a></span>
		  <span class="point"> · </span>
          <span><a href="/feed.xml">RSS</a></span>
          <span class="point"> · </span>
          <span>&copy; 2021 Liucanming</span>
      </div>
    </div>
  </div>
</footer>

    <script type="text/javascript">
    function OnClickNewPost()
    {
        var title = prompt("Please enter title of your post");
        if (title!=null){
            title = title.replace(" ", "-");
            var currentdate = new Date();
            var urlNewPage = "?filename=_posts/" 
                + currentdate.getFullYear() + "-" + (currentdate.getMonth()+1) + "-" + currentdate.getDate() + "-" + title + ".md";
                
            var defaultText =  [
                '---',
                'layout: post',
                'comments: true',
                'categories: diary',
                '---',
                '## Title',
                'text'
                ].join('\n');
            urlNewPage += "&value=" + encodeURIComponent(defaultText);
            window.open(urlNewPage);
        }
    }
    
    $(function() {
      // CreateNewPostLinks
      $('.newpost').each(function(){
          $(this).click(OnClickNewPost);
      });
    });
</script>
  
  </body>
</html>
